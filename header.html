<header class="main-header">
  <div class="header-container">
    <a href="index.html" class="logo">
      <i class="fas fa-laptop-code"></i>
      <span class="logo-text">IT Interview Hub</span>
    </a>
    
    <nav class="main-nav" id="mainNav">
      <a href="index.html" class="nav-link" data-page="index">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>
      <div class="nav-dropdown">
        <a href="#" class="nav-link dropdown-toggle">
          <i class="fas fa-book"></i>
          <span>Topics</span>
          <i class="fas fa-chevron-down dropdown-icon"></i>
        </a>
        <div class="dropdown-menu">
          <a href="programming-basics.html" class="dropdown-item">
            <i class="fas fa-code"></i> Programming Basics
          </a>
          <a href="oop-concepts.html" class="dropdown-item">
            <i class="fas fa-cubes"></i> OOP Concepts
          </a>
          <a href="data-structures.html" class="dropdown-item">
            <i class="fas fa-layer-group"></i> Data Structures
          </a>
          <a href="algorithms.html" class="dropdown-item">
            <i class="fas fa-diagram-project"></i> Algorithms
          </a>
          <a href="web-development.html" class="dropdown-item">
            <i class="fas fa-laptop-code"></i> Web Development
          </a>
          <a href="html5.html" class="dropdown-item">
            <i class="fas fa-html5"></i> HTML5
          </a>
          <a href="index.html#topics" class="dropdown-item view-all">
            <i class="fas fa-th"></i> View All Topics
          </a>
        </div>
      </div>
      <a href="test.html" class="nav-link" data-page="test" id="testNavLink">
        <i class="fas fa-clipboard-question"></i>
        <span>Test</span>
      </a>
      <a href="login.html" class="nav-link" data-page="login" id="loginNavLink" style="display: none;">
        <i class="fas fa-sign-in-alt"></i>
        <span>Login</span>
      </a>
      <a href="#" class="nav-link" id="logoutNavLink" style="display: none;" onclick="logout(); return false;">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </a>
      <a href="about.html" class="nav-link" data-page="about">
        <i class="fas fa-info-circle"></i>
        <span>About</span>
      </a>
      <a href="contact.html" class="nav-link" data-page="contact">
        <i class="fas fa-envelope"></i>
        <span>Contact</span>
      </a>
      <a href="index.html#topics" class="nav-link btn-nav">
        <i class="fas fa-search"></i>
        <span>Browse</span>
      </a>
    </nav>
    
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle mobile menu">
      <i class="fas fa-bars"></i>
    </button>
  </div>
  
  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-header">
      <span class="mobile-logo">
        <i class="fas fa-laptop-code"></i>
        IT Interview Hub
      </span>
      <button class="mobile-close-btn" id="mobileCloseBtn">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <nav class="mobile-nav">
      <a href="index.html" class="mobile-nav-link">
        <i class="fas fa-home"></i> Home
      </a>
      <div class="mobile-nav-section">
        <div class="mobile-nav-title">
          <i class="fas fa-book"></i> Topics
        </div>
        <a href="programming-basics.html" class="mobile-nav-link sub-link">
          <i class="fas fa-code"></i> Programming Basics
        </a>
        <a href="oop-concepts.html" class="mobile-nav-link sub-link">
          <i class="fas fa-cubes"></i> OOP Concepts
        </a>
        <a href="data-structures.html" class="mobile-nav-link sub-link">
          <i class="fas fa-layer-group"></i> Data Structures
        </a>
        <a href="algorithms.html" class="mobile-nav-link sub-link">
          <i class="fas fa-diagram-project"></i> Algorithms
        </a>
        <a href="web-development.html" class="mobile-nav-link sub-link">
          <i class="fas fa-laptop-code"></i> Web Development
        </a>
        <a href="html5.html" class="mobile-nav-link sub-link">
          <i class="fas fa-html5"></i> HTML5
        </a>
        <a href="index.html#topics" class="mobile-nav-link sub-link">
          <i class="fas fa-th"></i> View All Topics
        </a>
      </div>
      <a href="test.html" class="mobile-nav-link" id="testNavLinkMobile">
        <i class="fas fa-clipboard-question"></i> Test
      </a>
      <a href="login.html" class="mobile-nav-link" id="loginNavLinkMobile" style="display: none;">
        <i class="fas fa-sign-in-alt"></i> Login
      </a>
      <a href="#" class="mobile-nav-link" id="logoutNavLinkMobile" style="display: none;" onclick="logout(); return false;">
        <i class="fas fa-sign-out-alt"></i> Logout
      </a>
      <a href="about.html" class="mobile-nav-link">
        <i class="fas fa-info-circle"></i> About
      </a>
      <a href="contact.html" class="mobile-nav-link">
        <i class="fas fa-envelope"></i> Contact
      </a>
      <a href="index.html#topics" class="mobile-nav-link">
        <i class="fas fa-search"></i> Browse Topics
      </a>
    </nav>
  </div>
</header>

<style>
.main-header {
  background: #fff;
  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
  position: sticky;
  top: 0;
  z-index: 1000;
  border-bottom: 3px solid #2563eb;
  margin: 0;
  padding: 0;
}

.header-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 1rem 5%;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  text-decoration: none;
  font-size: 1.75rem;
  font-weight: 800;
  color: #2563eb;
  transition: all 0.3s ease;
}

.logo:hover {
  transform: translateY(-2px);
  color: #1d4ed8;
}

.logo i {
  font-size: 2rem;
  background: linear-gradient(135deg, #2563eb, #1e40af);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.main-nav {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  color: #0f172a;
  text-decoration: none;
  font-weight: 500;
  font-size: 0.95rem;
  border-radius: 8px;
  transition: all 0.3s ease;
  position: relative;
}

.nav-link:hover {
  background: rgba(37, 99, 235, 0.1);
  color: #2563eb;
}

.nav-link.active {
  background: rgba(37, 99, 235, 0.15);
  color: #2563eb;
}

.nav-link.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 60%;
  height: 3px;
  background: #2563eb;
  border-radius: 2px;
}

.nav-link.btn-nav {
  background: linear-gradient(135deg, #2563eb, #1e40af);
  color: white;
  font-weight: 600;
}

.nav-link.btn-nav:hover {
  background: linear-gradient(135deg, #1e40af, #1e3a8a);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
}

.nav-dropdown {
  position: relative;
}

.dropdown-toggle {
  cursor: pointer;
}

.dropdown-icon {
  font-size: 0.7rem;
  margin-left: 0.25rem;
  transition: transform 0.3s ease;
}

.nav-dropdown:hover .dropdown-icon {
  transform: rotate(180deg);
}

.dropdown-menu {
  position: absolute;
  top: calc(100% + 0.5rem);
  left: 0;
  background: white;
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
  min-width: 250px;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.3s ease;
  padding: 0.5rem;
  z-index: 1000;
}

.nav-dropdown:hover .dropdown-menu {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.dropdown-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  color: #0f172a;
  text-decoration: none;
  border-radius: 8px;
  transition: all 0.3s ease;
  font-size: 0.95rem;
}

.dropdown-item:hover {
  background: rgba(37, 99, 235, 0.1);
  color: #2563eb;
  transform: translateX(5px);
}

.dropdown-item i {
  width: 20px;
  text-align: center;
  color: #2563eb;
}

.dropdown-item.view-all {
  background: rgba(37, 99, 235, 0.1);
  font-weight: 600;
  margin-top: 0.5rem;
  border-top: 1px solid rgba(37, 99, 235, 0.2);
  padding-top: 1rem;
}

.mobile-menu-btn {
  display: none;
  background: none;
  border: none;
  font-size: 1.5rem;
  color: #0f172a;
  cursor: pointer;
  padding: 0.75rem;
  border-radius: 8px;
  transition: all 0.3s ease;
}

.mobile-menu-btn:hover {
  background: rgba(37, 99, 235, 0.1);
  color: #2563eb;
}

.mobile-menu {
  display: none;
  position: fixed;
  top: 0;
  left: -100%;
  width: 320px;
  max-width: 85vw;
  height: 100vh;
  background: white;
  box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);
  z-index: 2000;
  transition: left 0.3s ease;
  overflow-y: auto;
}

.mobile-menu.active {
  left: 0;
}

.mobile-menu-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem;
  background: linear-gradient(135deg, #2563eb, #1e40af);
  color: white;
}

.mobile-logo {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 1.25rem;
  font-weight: 700;
}

.mobile-close-btn {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  width: 40px;
  height: 40px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.mobile-close-btn:hover {
  background: rgba(255, 255, 255, 0.3);
}

.mobile-nav {
  padding: 1rem 0;
}

.mobile-nav-link {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.5rem;
  color: #0f172a;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  border-bottom: 1px solid #f1f5f9;
}

.mobile-nav-link:hover,
.mobile-nav-link.active {
  background: rgba(37, 99, 235, 0.1);
  color: #2563eb;
  padding-left: 2rem;
}

.mobile-nav-link i {
  width: 24px;
  text-align: center;
  color: #2563eb;
}

.mobile-nav-section {
  margin: 0.5rem 0;
}

.mobile-nav-title {
  padding: 1rem 1.5rem;
  font-weight: 700;
  color: #2563eb;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  background: rgba(37, 99, 235, 0.05);
}

.mobile-nav-link.sub-link {
  padding-left: 3rem;
  font-size: 0.9rem;
}

.mobile-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1500;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.mobile-overlay.active {
  display: block;
  opacity: 1;
}

@media (max-width: 968px) {
  .main-nav .nav-link span {
    display: none;
  }
  
  .nav-link {
    padding: 0.75rem;
  }
  
  .dropdown-menu {
    left: auto;
    right: 0;
  }
}

@media (max-width: 768px) {
  .main-nav {
    display: none;
  }
  
  .mobile-menu-btn {
    display: block;
  }
  
  .logo-text {
    display: none;
  }
  
  .header-container {
    padding: 1rem 3%;
  }
}

@media (max-width: 480px) {
  .logo {
    font-size: 1.5rem;
  }
  
  .mobile-menu {
    width: 100%;
    max-width: 100%;
  }
}
</style>

<script>
(function() {
  'use strict';
  
  // Mobile menu functionality
  function initMobileMenu() {
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileCloseBtn = document.getElementById('mobileCloseBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    
    // Create overlay if it doesn't exist
    let overlay = document.querySelector('.mobile-overlay');
    if (!overlay) {
      overlay = document.createElement('div');
      overlay.className = 'mobile-overlay';
      document.body.appendChild(overlay);
    }
    
    function openMenu() {
      mobileMenu.classList.add('active');
      overlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    
    function closeMenu() {
      mobileMenu.classList.remove('active');
      overlay.classList.remove('active');
      document.body.style.overflow = '';
    }
    
    if (mobileMenuBtn) {
      mobileMenuBtn.addEventListener('click', openMenu);
    }
    
    if (mobileCloseBtn) {
      mobileCloseBtn.addEventListener('click', closeMenu);
    }
    
    if (overlay) {
      overlay.addEventListener('click', closeMenu);
    }
    
    // Close menu when clicking on a link
    const mobileLinks = mobileMenu?.querySelectorAll('.mobile-nav-link');
    mobileLinks?.forEach(link => {
      link.addEventListener('click', closeMenu);
    });
  }
  
  // Set active nav link based on current page
  function setActiveNavLink() {
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');
    
    navLinks.forEach(link => {
      const href = link.getAttribute('href');
      if (href === currentPage || 
          (currentPage === '' && href === 'index.html') ||
          (currentPage.includes(href.replace('.html', '')) && href !== '#')) {
        link.classList.add('active');
      }
    });
  }
  
  // Check authentication and update nav
  async function updateNavAuth() {
    try {
      const response = await fetch('http://localhost:3000/api/auth/status', {
        credentials: 'include'
      });
      const data = await response.json();
      
      if (data.authenticated) {
        // User is logged in
        document.getElementById('loginNavLink').style.display = 'none';
        document.getElementById('loginNavLinkMobile').style.display = 'none';
        document.getElementById('logoutNavLink').style.display = 'inline-flex';
        document.getElementById('logoutNavLinkMobile').style.display = 'block';
      } else {
        // User is not logged in
        document.getElementById('loginNavLink').style.display = 'inline-flex';
        document.getElementById('loginNavLinkMobile').style.display = 'block';
        document.getElementById('logoutNavLink').style.display = 'none';
        document.getElementById('logoutNavLinkMobile').style.display = 'none';
      }
    } catch (error) {
      // If server is not running, show login link
      document.getElementById('loginNavLink').style.display = 'inline-flex';
      document.getElementById('loginNavLinkMobile').style.display = 'block';
      document.getElementById('logoutNavLink').style.display = 'none';
      document.getElementById('logoutNavLinkMobile').style.display = 'none';
    }
  }
  
  // Logout function
  window.logout = async function() {
    try {
      await fetch('http://localhost:3000/api/logout', {
        method: 'POST',
        credentials: 'include'
      });
      sessionStorage.removeItem('user');
      sessionStorage.removeItem('isLoggedIn');
      window.location.href = 'login.html';
    } catch (error) {
      console.error('Logout error:', error);
      sessionStorage.removeItem('user');
      sessionStorage.removeItem('isLoggedIn');
      window.location.href = 'login.html';
    }
  };
  
  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
      initMobileMenu();
      setActiveNavLink();
      updateNavAuth();
    });
  } else {
    initMobileMenu();
    setActiveNavLink();
    updateNavAuth();
  }
})();
</script>
